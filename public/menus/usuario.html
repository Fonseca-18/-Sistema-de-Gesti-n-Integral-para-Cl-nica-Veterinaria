<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="stylesmenu.css" />
  <link rel="icon" href="/Imagenes/iconoo.png" type="image/png">
  <title>Menú Cliente</title>
</head>
<body>
  <main class="contenedor-menu-usu">
    
    <div class="menu-header">
      <h1 class="titulo-menu-usu">🐾 Zona Cliente</h1>
    </div>

    <nav class="menu-links">
      <div class="menu-lista">
        <ul class="menu-ul">
          <li class="menu-item">
            <a class="menu-link" href="/mascotas/registromascota.html">
              🐶 Registrar Mascota
            </a>
          </li>
          <li class="menu-item">
            <a class="menu-link" href="/agendar/agendarcitas.html">
              📅 Agendar Cita
            </a>
          </li>
          <li class="menu-item">
            <a class="menu-link" href="/consultas/cunsultacita.html">
              🔍 Consultar Cita
            </a>
          </li>
          <li class="menu-item">
            <a class="menu-link" href="/editardatos/editardp.html">
              ✏️ Editar Datos Personales
            </a>
          </li>
          <li class="menu-item">
            <a class="menu-link" href="/ver/vermascota.html">
              🐾 Editar Datos de la Mascota
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="menu-footer">
      <button id="logoutBtn" type="button" class="btn-logout">🚪 Cerrar sesión</button>
    </div>

  </main>

  <script>
    document.getElementById("logoutBtn").addEventListener("click", () => {
      fetch("/logout")
        .then(() => {
          window.location.href = "/index.html";
        })
        .catch(err => console.error("Error al cerrar sesión:", err));
    });
  </script>

    <!-- Chatbot flotante -->
<div id="chatbot">
  <div id="chatbot-header">🤖 Asistente UC</div>
  <div id="chatbot-body"></div>
  <div id="chatbot-footer">
    <input type="text" id="chatbot-input" placeholder="Escribe tu mensaje..." />
    <button id="chatbot-send">➤</button>
  </div>
</div>

<script>
  const body = document.getElementById("chatbot-body");
  const input = document.getElementById("chatbot-input");
  const send = document.getElementById("chatbot-send");

  function addMessage(text, sender) {
    const msg = document.createElement("div");
    msg.className = sender === "user" ? "msg user" : "msg bot";
    msg.innerText = text;
    body.appendChild(msg);
    body.scrollTop = body.scrollHeight;
  }

  async function sendMessage() {
    const text = input.value.trim();
    if (!text) return;
    addMessage(text, "user");
    input.value = "";

    try {
      const res = await fetch("/chatbot", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message: text })
      });
      const data = await res.json();
      addMessage(data.reply, "bot");
    } catch (e) {
      addMessage("❌ Error al conectar con el servidor", "bot");
    }
  }

  send.addEventListener("click", sendMessage);
  input.addEventListener("keypress", e => {
    if (e.key === "Enter") sendMessage();
  });
</script>

</body>
</html>
